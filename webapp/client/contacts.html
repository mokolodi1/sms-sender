<template name="contacts">
  <h1>Contacts</h1>

  <h3>Create new</h3>
  {{#autoForm id="insertMessage" type="insert" collection=Contacts}}
    {{> horizontalField name="name"}}
    {{> horizontalField name="phone_number"}}
    {{> horizontalField name="preferred_language" options="allowed"
        firstOption="(Select a preferred language)"}}
    <div class="form-group">
      <button type="submit" onclick="return true;//confirm('Are you sure?')"
          class="btn btn-primary">Add contact</button>
      <button type="reset" class="btn btn-default">Reset form</button>
    </div>
  {{/autoForm}}

  <h3>Registered contacts</h3>
  {{#if length getContacts}}
    <div class="list-group">
      {{#each getContacts}}
        {{> showContact}}
      {{/each}}
    </div>
  {{else}}
    <div class="well">
      No contacts have been created.
    </div>
  {{/if}}
</template>

<template name="showContact">
  <div class="list-group-item {{listGroupItemClass}} {{active}}">
    <h4 class="list-group-item-heading">
      {{name}}
      <span class="pull-right">
        <button class="toggle-editing btn btn-xs btn-primary">
          {{#if editing}}
            <span class="glyphicon glyphicon-remove"></span>
            <span>Cancel editing</span>
          {{else}}
            <span class="glyphicon glyphicon-edit"></span>
            <span>Edit</span>
          {{/if}}
        </button>
        <button class="notifications-toggle btn btn-xs btn-warning">
          {{#if notifications_active}}
            <span class="glyphicon glyphicon-volume-up"></span>
            <span>Subscribed</span>
          {{else}}
            <span class="glyphicon glyphicon-volume-off"></span>
            <span>Unsubscribed</span>
          {{/if}}
        </button>
        <button class="remove-contact btn btn-xs btn-danger">
          <span class="glyphicon glyphicon-trash"></span>
          <span>Delete</span>
        </button>
      </span>
    </h4>
    <p class="list-group-item-text">Phone number: {{phone_number}}</p>
    <p class="list-group-item-text">Preferred language: {{preferred_language}}</p>
    <p class="list-group-item-text">Messages sent: {{messages_sent_count}}</p>
  </div>
</template>
